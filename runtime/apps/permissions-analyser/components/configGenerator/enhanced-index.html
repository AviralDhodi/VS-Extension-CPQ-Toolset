<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Permissions Configuration Generator</title>
    <link rel="stylesheet" href="/shared/assets/slds/styles/salesforce-lightning-design-system.min.css">
</head>
<body>
    <div class="slds-scope">
        <!-- SLDS Path Component -->
        <div class="slds-path">
            <div class="slds-grid slds-path__track">
                <div class="slds-grid slds-path__scroller-container">
                    <div class="slds-path__scroller" role="application">
                        <div class="slds-path__scroller_inner">
                            <ul class="slds-path__nav" role="listbox">
                                <li class="slds-path__item slds-is-current slds-is-active" role="presentation" data-step="orgs">
                                    <a class="slds-path__link" href="javascript:void(0);" role="option" tabindex="0">
                                        <span class="slds-path__stage">
                                            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                        </span>
                                        <span class="slds-path__title">Organizations</span>
                                    </a>
                                </li>
                                <li class="slds-path__item slds-is-incomplete" role="presentation" data-step="permissionTypes">
                                    <a class="slds-path__link" href="javascript:void(0);" role="option" tabindex="-1">
                                        <span class="slds-path__stage">
                                            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                        </span>
                                        <span class="slds-path__title">Permission Types</span>
                                    </a>
                                </li>
                                <li class="slds-path__item slds-is-incomplete" role="presentation" data-step="metadata">
                                    <a class="slds-path__link" href="javascript:void(0);" role="option" tabindex="-1">
                                        <span class="slds-path__stage">
                                            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                        </span>
                                        <span class="slds-path__title">Metadata Selection</span>
                                    </a>
                                </li>
                                <li class="slds-path__item slds-is-incomplete" role="presentation" data-step="permissions">
                                    <a class="slds-path__link" href="javascript:void(0);" role="option" tabindex="-1">
                                        <span class="slds-path__stage">
                                            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                        </span>
                                        <span class="slds-path__title">Permission Options</span>
                                    </a>
                                </li>
                                <li class="slds-path__item slds-is-incomplete" role="presentation" data-step="finalize">
                                    <a class="slds-path__link" href="javascript:void(0);" role="option" tabindex="-1">
                                        <span class="slds-path__stage">
                                            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                        </span>
                                        <span class="slds-path__title">Review & Generate</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="slds-container_x-large slds-container_center slds-p-horizontal_x-large slds-p-vertical_medium">
            <!-- Step 1: Organizations -->
            <div id="step-orgs" class="step-content">
                <div class="slds-text-align_center slds-m-bottom_x-large">
                    <h1 class="slds-text-heading_large">Select Organizations</h1>
                    <p class="slds-text-body_large slds-text-color_weak">
                        Choose at least 2 organizations to compare permissions
                    </p>
                </div>

                <article class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col slds-size_1-of-1">
                                <button class="slds-button slds-button_outline-brand" id="loadOrgsBtn">
                                    <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
                                        <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#refresh"></use>
                                    </svg>
                                    Load Organizations
                                </button>
                            </div>
                        </div>

                        <!-- Organizations Data Table -->
                        <div id="orgsList" class="slds-m-top_medium">
                            <!-- Organizations table will be loaded here -->
                        </div>

                        <div class="slds-m-top_large slds-text-align_right">
                            <button class="slds-button slds-button_neutral" disabled>Previous</button>
                            <button class="slds-button slds-button_brand slds-m-left_x-small" id="nextToPermissionTypes" disabled>
                                Next: Select Permission Types
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Step 2: Permission Types -->
            <div id="step-permissionTypes" class="step-content" style="display: none;">
                <div class="slds-text-align_center slds-m-bottom_x-large">
                    <h1 class="slds-text-heading_large">Select Permission Types</h1>
                    <p class="slds-text-body_large slds-text-color_weak">
                        Choose which types of permissions to compare
                    </p>
                </div>

                <article class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div id="permissionTypesList">
                            <!-- Permission types will be loaded here -->
                        </div>

                        <div class="slds-m-top_large slds-text-align_right">
                            <button class="slds-button slds-button_neutral" id="backToOrgs">Previous</button>
                            <button class="slds-button slds-button_brand slds-m-left_x-small" id="nextToMetadata" disabled>
                                Next: Select Metadata
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Step 3: Metadata Selection -->
            <div id="step-metadata" class="step-content" style="display: none;">
                <div class="slds-text-align_center slds-m-bottom_x-large">
                    <h1 class="slds-text-heading_large">Select Metadata Items</h1>
                    <p class="slds-text-body_large slds-text-color_weak">
                        Choose specific items to compare with assignment counts
                    </p>
                </div>

                <article class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div id="metadataSelectionContent">
                            <!-- Metadata selection tables will be loaded here -->
                        </div>

                        <div class="slds-m-top_large slds-text-align_right">
                            <button class="slds-button slds-button_neutral" id="backToPermissionTypes">Previous</button>
                            <button class="slds-button slds-button_brand slds-m-left_x-small" id="nextToPermissions" disabled>
                                Next: Configure Permissions
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Step 4: Permission Options -->
            <div id="step-permissions" class="step-content" style="display: none;">
                <div class="slds-text-align_center slds-m-bottom_x-large">
                    <h1 class="slds-text-heading_large">Configure Permission Options</h1>
                    <p class="slds-text-body_large slds-text-color_weak">
                        Select what permission details to compare
                    </p>
                </div>

                <article class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div id="permissionOptionsContent">
                            <!-- Permission options will be loaded here -->
                        </div>

                        <div class="slds-m-top_large slds-text-align_right">
                            <button class="slds-button slds-button_neutral" id="backToMetadata">Previous</button>
                            <button class="slds-button slds-button_brand slds-m-left_x-small" id="nextToFinalize">
                                Next: Review Configuration
                            </button>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Step 5: Review & Generate -->
            <div id="step-finalize" class="step-content" style="display: none;">
                <div class="slds-text-align_center slds-m-bottom_x-large">
                    <h1 class="slds-text-heading_large">Review Configuration</h1>
                    <p class="slds-text-body_large slds-text-color_weak">
                        Review your selections and generate the configuration
                    </p>
                </div>

                <article class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div id="configReview">
                            <!-- Configuration review will be loaded here -->
                        </div>

                        <div class="slds-m-top_large slds-text-align_right">
                            <button class="slds-button slds-button_neutral" id="backToPermissions">Previous</button>
                            <button class="slds-button slds-button_success slds-m-left_x-small" id="generateConfigBtn">
                                <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
                                    <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#download"></use>
                                </svg>
                                Generate Configuration
                            </button>
                            <button class="slds-button slds-button_brand slds-m-left_x-small" id="startExtractionBtn">
                                <svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
                                    <use xlink:href="/shared/assets/slds/icons/utility-sprite/svg/symbols.svg#play"></use>
                                </svg>
                                Start Extraction
                            </button>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="slds-notify_container slds-is-fixed"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="slds-spinner_container slds-is-fixed" style="display: none;">
        <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
            <span class="slds-assistive-text" id="loadingText">Loading...</span>
            <div class="slds-spinner__dot-a"></div>
            <div class="slds-spinner__dot-b"></div>
        </div>
    </div>
</body>
</html>