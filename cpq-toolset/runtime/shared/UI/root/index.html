<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPQ Toolset v3 - Select Application</title>
    <link rel="stylesheet" href="/shared/styles/slds-dark.css">
    <style>
        /* Additional styles for root page */
        .app-selector {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--slds-g-spacing-large);
            padding: var(--slds-g-spacing-x-large);
        }
        
        .app-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .app-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(27, 150, 255, 0.3);
        }
        
        .app-icon {
            width: 4rem;
            height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--slds-g-radius-border-3);
            margin-bottom: var(--slds-g-spacing-medium);
        }
        
        .app-icon.data-comparison {
            background: var(--slds-g-color-brand-base-50);
        }
        
        .app-icon.permissions {
            background: var(--slds-g-color-success);
        }
        
        .app-icon svg {
            width: 2rem;
            height: 2rem;
            fill: white;
        }
        
        .status-badge {
            display: inline-block;
            padding: var(--slds-g-spacing-xx-small) var(--slds-g-spacing-small);
            border-radius: var(--slds-g-radius-border-4);
            font-size: var(--slds-g-font-size-2);
            font-weight: var(--slds-g-font-weight-bold);
            text-transform: uppercase;
        }
        
        .status-badge.ready {
            background: var(--slds-g-color-success);
            color: white;
        }
        
        .status-badge.coming-soon {
            background: var(--slds-g-color-neutral-base-50);
            color: var(--slds-g-color-neutral-10);
        }
    </style>
</head>
<body>
    <div class="slds-scope">
        <div class="app-selector">
            <!-- Header -->
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title">CPQ Toolset v3</h1>
                                <p class="slds-text-body_regular">Select an application to get started</p>
                            </div>
                        </div>
                    </div>
                    <div class="slds-page-header__col-actions">
                        <span class="slds-badge slds-theme_success">System Ready</span>
                    </div>
                </div>
            </div>

            <!-- App Selection Grid -->
            <div class="app-grid">
                <!-- Data Comparison App -->
                <div class="slds-card app-card" onclick="navigateToApp('data-comparison')">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="app-icon data-comparison">
                            <svg viewBox="0 0 24 24">
                                <path d="M9 3v18l3-3 3 3V3H9zM5 3H3v18h2V3zm14 0v18h2V3h-2z"/>
                            </svg>
                        </div>
                        <h2 class="slds-text-heading_medium slds-m-bottom_small">Data Comparison</h2>
                        <p class="slds-text-body_regular slds-m-bottom_medium">
                            Compare Salesforce CPQ configurations across multiple organizations with advanced filtering and analysis capabilities.
                        </p>
                        <div class="slds-m-bottom_small">
                            <span class="status-badge ready">Production Ready</span>
                        </div>
                        <ul class="slds-list_dotted">
                            <li>Multi-org data extraction</li>
                            <li>Advanced filtering per organization</li>
                            <li>Excel and CSV export</li>
                            <li>Real-time comparison status</li>
                        </ul>
                    </div>
                    <div class="slds-card__footer">
                        <button class="slds-button slds-button_brand slds-button_stretch">
                            Launch Data Comparison
                        </button>
                    </div>
                </div>

                <!-- Permissions Analyser App -->
                <div class="slds-card app-card" onclick="navigateToApp('permissions-analyser')">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="app-icon permissions">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                            </svg>
                        </div>
                        <h2 class="slds-text-heading_medium slds-m-bottom_small">Permissions Analyser</h2>
                        <p class="slds-text-body_regular slds-m-bottom_medium">
                            Analyze and compare permission sets, profiles, and security configurations across Salesforce organizations.
                        </p>
                        <div class="slds-m-bottom_small">
                            <span class="status-badge coming-soon">Coming Soon</span>
                        </div>
                        <ul class="slds-list_dotted slds-text-color_weak">
                            <li>Profile comparison</li>
                            <li>Permission set analysis</li>
                            <li>Security audit trails</li>
                            <li>Access control matrix</li>
                        </ul>
                    </div>
                    <div class="slds-card__footer">
                        <button class="slds-button slds-button_neutral slds-button_stretch" disabled>
                            Coming Soon
                        </button>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="slds-m-top_x-large slds-p-around_large slds-text-align_center">
                <div class="slds-text-body_small slds-text-color_weak">
                    CPQ Toolset v3.0.0 • 
                    <a href="/health">Health Check</a> • 
                    <a href="/debug">Debug Info</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function navigateToApp(appName) {
            if (appName === 'permissions-analyser') {
                // Show coming soon message
                alert('Permissions Analyser is coming soon!');
                return;
            }
            
            // Navigate to the app
            window.location.href = `/${appName}`;
        }

        // Check system health on load
        async function checkHealth() {
            try {
                const response = await fetch('/health');
                const data = await response.json();
                console.log('System health:', data);
            } catch (error) {
                console.error('Health check failed:', error);
            }
        }

        checkHealth();
    </script>
</body>
</html>